    <% form_for(@iguana) do |f| %>
      <%= f.hidden_field :clasereasentamiento %>    
      <%= f.hidden_field :etapa%>
<% if (@iguana.fecha_notificacion.to_s != "")
    if (@iguana.resolucion_aceptada.to_s != "")
       segundos = (@iguana.fecha_notificacion - @iguana.resolucion_aceptada).to_i
       minutos  = (segundos/60).to_i #es el nÃºmero total de minutos
       horas    = (minutos/60).to_i #nÃºmero total de horas
       dias     = (horas/24).to_i # nÃºmero total de dÃ­as
       if (dias <= 25 )
         band = "verde1.png"
       elsif (dias <= 30 )
         band = "amarillo1.png"
       else
         band = "rojo1.png"
       end
     else
       segundos = (Time.now - @iguana.fecha_notificacion).to_i
       minutos  = (segundos/60).to_i #es el nÃºmero total de minutos
       horas    = (minutos/60).to_i #nÃºmero total de horas
       dias     = (horas/24).to_i # nÃºmero total de dÃ­as
       if (dias <= 25 )
         band = "verde1.png"
       elsif (dias <= 30 )
         band = "amarillo1.png"
       else
         band = "rojo1.png"
       end
     end
  else
     band = "blanco1.png"
  end
  #Verificacion de alerta en Solicitud de Revision de Avaluo
  if (@iguana.solicitud_revision_avaluo.to_s == "S")
    if (@iguana.fecha_sol_rev_avaluo.to_s != "")
      if (@iguana.resultado_revision.to_s != "")
        band2 = "blanco1.png"
      else
        segundos = (Time.now - @iguana.fecha_sol_rev_avaluo).to_i
        minutos  = (segundos/60).to_i #es el nÃºmero total de minutos
        horas    = (minutos/60).to_i #nÃºmero total de horas
        dias     = (horas/24).to_i # nÃºmero total de dÃ­as
        if (dias <= 10 )
          band2 = "verde1.png"
        elsif (dias <= 12 )
          band2 = "amarillo1.png"
        else
          band2 = "rojo1.png"
        end
      end
    else
      band2 = "blanco1.png"
    end
  else
    band2 = "blanco1.png"
  end
  #Verificacion de alerta en Compraventa
  if (@iguana.resultado_revision.to_s != "")
    if (@iguana.compraventa_firma.to_s != "")
      band3 = "blanco1.png"
    else
      band3 = "rojo1.png"
    end
  else
    band3 = "blanco1.png"
  end

%>
<table width="100%" border="0" cellpadding="2" cellspacing="2"  align="center">
  <tr><td></td></tr>
  <tr>
    <td  height="30"><div class="col_enc">INFORMACIÓN PREDIOS</div></td>
  </tr>
</table>
<table width="100%" border="0" cellspacing="2" cellpadding="0">
       <tr class="odd1">
          <td width="37%" class="campos">Proyecto</td>
          <td width="18%" class="campos">Identificacion Plano</td>
          <td width="45%" class="campos">Social Asignado </td>
        </tr>
        <tr>
          <td class="camposDesc"><%= select(:iguana,:proyecto,select_iguanaproyectos, { :include_blank => true },
                                          { :style=>"width:350px", :class => "campo", :onFocus => "this.style.border='1px solid #f00'", :onBlur => "this.style.border='1px solid #bbb'" })%>
                                 <%= f.error_message_on :proyecto, :css_class =>"cerror"%>
          </td>
          <td class="camposDesc"><%= f.text_field :nro_registro,{ :class => "campo", :size => 15,
                                        :onChange=> "javascript:this.value=this.value.toUpperCase();",
                                        :onFocus => "this.style.border='1px solid #f00'",
                                        :onBlur => "this.style.border='1px solid #bbb'" } %>
                                <%= f.error_message_on :nro_registro, :css_class =>"cerror"%></td>
          <td class="camposDesc"><%=select("iguana", "social_asignado", select_user.collect {|p| [ p.nombre, p.id ] }, { :include_blank => true },
                                     { :style=>"width:400px", :class => "campo", :onFocus => "this.style.border='1px solid #f00'", :onBlur => "this.style.border='1px solid #bbb'" }) %></td>
        </tr>
    </table>
      <table width="100%" border="0" cellspacing="2" cellpadding="0">
        <tr class="odd1">
          <td width="45%" class="campos">Juridico Asignado </td>
          <td width="55%" class="campos">Sector *</td>
        </tr>
        <tr>
          <td class="camposDesc"><%=select("iguana", "juridico_asignado", select_user.collect {|p| [ p.nombre, p.id ] }, { :include_blank => true },
                                    { :style=>"width:350px", :class => "campo", :onFocus => "this.style.border='1px solid #f00'", :onBlur => "this.style.border='1px solid #bbb'" }) %>
          </td> 
          <td class="camposDesc"><%= select(:iguana, :sector, select_sector,{ :include_blank => true },
                                    { :style=>"width:460px", :class => "campo", :onFocus => "this.style.border='1px solid #f00'", :onBlur => "this.style.border='1px solid #bbb'" })%>
                                <%= f.error_message_on :sector, :css_class =>"cerror"%></td>          
        </tr>
      </table>
      <table width="100%" border="0" cellspacing="2" cellpadding="0">
        <tr class="odd1">
          <td width="50%" class="campos">Entidad que adquiere</td>
          <td width="30%" class="campos">Fecha de remisión del expediente</td>
        </tr>
        <tr>
          <td class="camposDesc"><%= f.text_field :entidad_adquiere,{ :class => "campo", :size => 80,
                                    :onChange=> "javascript:this.value=this.value.toUpperCase();",
                                    :onFocus => "this.style.border='1px solid #f00'",
                                    :onBlur => "this.style.border='1px solid #bbb'" } %>
                                <%= f.error_message_on :entidad_adquiere, :css_class =>"cerror"%>
          </td>
          <td class="camposDesc"><%= calendar_date_select "iguana", "fecha_remision", :year_range => select_rangocalendar, :class=> "campo", :size => 10, :time => false, :onfocus=>"this.blur()"%></td>
        </tr>
      </table>
      <table width="100%" border="0" cellspacing="2" cellpadding="0">
        <tr class="odd1">
          <td width="10%" class="campos">Encuesta *</td>
          <td width="10%" class="campos">Cobama *</td>
          <td width="20%" class="campos">Matricula *</td>
          <td width="10%" class="campos">Comuna</td>
          <td width="10%" class="campos">Barrio</td>
          <td width="10%" class="campos">Manzana</td>
        </tr>
        <tr>
          <td class="camposDesc"><%= f.text_field :encuesta,{ :class => "campo", :size => 20,
                                  :onChange=> "javascript:this.value=this.value.toUpperCase();",
                                  :onFocus => "this.style.border='1px solid #f00'",
                                  :onBlur => "this.style.border='1px solid #bbb'" } %>
                                <%= f.error_message_on :encuesta, :css_class =>"cerror"%></td>
          <td class="camposDesc"><%= f.text_field :cobama,{ :class => "campo", :size => 20,
                                  :onChange=> "javascript:this.value=this.value.toUpperCase();",
                                  :onFocus => "this.style.border='1px solid #f00'",
                                  :onBlur => "this.style.border='1px solid #bbb'" } %>
                                <%= f.error_message_on :cobama, :css_class =>"cerror"%></td>
          <td class="camposDesc"><%= f.text_field :matricula,{ :class => "campo", :size => 27,
                                  :onChange=> "javascript:this.value=this.value.toUpperCase();",
                                  :onFocus => "this.style.border='1px solid #f00'",
                                  :onBlur => "this.style.border='1px solid #bbb'" } %>
                                <%= f.error_message_on :matricula, :css_class =>"cerror"%></td>
          <td class="camposDesc"><%= f.text_field :comuna,{ :class => "campo", :size => 10,
                                  :onChange=> "javascript:this.value=this.value.toUpperCase();",
                                  :onFocus => "this.style.border='1px solid #f00'",
                                  :onBlur => "this.style.border='1px solid #bbb'" } %>
                                <%= f.error_message_on :comuna, :css_class =>"cerror"%></td>
          <td class="camposDesc"><%= f.text_field :barrio,{ :class => "campo", :size => 10,
                                  :onChange=> "javascript:this.value=this.value.toUpperCase();",
                                  :onFocus => "this.style.border='1px solid #f00'",
                                  :onBlur => "this.style.border='1px solid #bbb'" } %>
                                <%= f.error_message_on :barrio, :css_class =>"cerror"%></td>
          <td class="camposDesc"><%= f.text_field :manzana,{ :class => "campo", :size => 10,
                                  :onChange=> "javascript:this.value=this.value.toUpperCase();",
                                  :onFocus => "this.style.border='1px solid #f00'",
                                  :onBlur => "this.style.border='1px solid #bbb'" } %>
                                <%= f.error_message_on :manzana, :css_class =>"cerror"%></td>

        </tr>
      </table>
       <table width="100%" border="0" cellspacing="2" cellpadding="0">
        <tr class="odd1">
          <td width="10%" class="campos">Lote</td>
          <td width="10%" class="campos">Interior</td>
          <td width="15%" class="campos">Disponibilidad</td>
          <td width="65%" class="campos">Direccion *</td>
        </tr>
        <tr>
          <td class="camposDesc"><%= f.text_field :lote,{ :class => "campo", :size => 10,
                                  :onChange=> "javascript:this.value=this.value.toUpperCase();",
                                  :onFocus => "this.style.border='1px solid #f00'",
                                  :onBlur => "this.style.border='1px solid #bbb'" } %></td>
          <td class="camposDesc"><%= f.text_field :interior,{ :class => "campo", :size => 10,
                                  :onChange=> "javascript:this.value=this.value.toUpperCase();",
                                  :onFocus => "this.style.border='1px solid #f00'",
                                  :onBlur => "this.style.border='1px solid #bbb'" } %></td>
          <td class="camposDesc"><%= f.text_field :disponibilidad,{ :class => "campo", :size => 10,
                                  :onChange=> "javascript:this.value=this.value.toUpperCase();",
                                  :onFocus => "this.style.border='1px solid #f00'",
                                  :onBlur => "this.style.border='1px solid #bbb'" } %></td>
          <td class="camposDesc"><%= f.text_field :direccion,{ :class => "campo", :size => 80,
                                  :onChange=> "javascript:this.value=this.value.toUpperCase();",
                                  :onFocus => "this.style.border='1px solid #f00'",
                                  :onBlur => "this.style.border='1px solid #bbb'" } %>
                              <%= f.error_message_on :direccion, :css_class =>"cerror"%></td>

        </tr>
      </table>
      <table width="100%" border="0" cellspacing="2" cellpadding="0">
        <tr class="odd1">
          <td width="20%" class="campos">Compensaci&oacute;n Economica</td>
          <td width="20%" class="campos">Compensacion Traslado</td>
          <td width="20%" class="campos">Compensacion Tramites Legales</td>
          <td width="20%" class="campos">Valor AVALUO</td>
          <td width="20%" class="campos">Compensacion Arrendatario</td>
        </tr>
        <tr>
          <td height="19" class="camposDesc"><%= f.text_field :valor_compensacion,{ :class => "campo", :size => 20,
                                  :onChange=> "javascript:this.value=this.value.toUpperCase();",
                                  :onFocus => "this.style.border='1px solid #f00'",
                                  :onBlur => "this.style.border='1px solid #bbb'" } %>
          <%= f.error_message_on :valor_compensacion, :css_class =>"cerror"%></td>
          <td class="camposDesc"><%= f.text_field :valor_traslado,{ :class => "campo", :size => 20,
                                  :onChange=> "javascript:this.value=this.value.toUpperCase();",
                                  :onFocus => "this.style.border='1px solid #f00'",
                                  :onBlur => "this.style.border='1px solid #bbb'" } %></td>
          <td class="camposDesc"><%= f.text_field :valor_tramites,{ :class => "campo", :size => 20,
                                  :onChange=> "javascript:this.value=this.value.toUpperCase();",
                                  :onFocus => "this.style.border='1px solid #f00'",
                                  :onBlur => "this.style.border='1px solid #bbb'" } %></td>
          <td><%= f.text_field :valor_avaluo,{ :class => "campo", :size => 20,
                                  :onChange=> "javascript:this.value=this.value.toUpperCase();",
                                  :onFocus => "this.style.border='1px solid #f00'",
                                  :onBlur => "this.style.border='1px solid #bbb'" } %>
            <%= f.error_message_on :valor_avaluo, :css_class =>"cerror"%></td>
          <td><%= f.text_field :valor_arrendatario,{ :class => "campo", :size => 20,
                                  :onChange=> "javascript:this.value=this.value.toUpperCase();",
                                  :onFocus => "this.style.border='1px solid #f00'",
                                  :onBlur => "this.style.border='1px solid #bbb'" } %>
            <%= f.error_message_on :valor_arrendatario, :css_class =>"cerror"%></td>
        </tr>
      </table>
      <table width="100%" border="0" cellspacing="2" cellpadding="0">
        <tr class="odd1">
          <td width="20%" class="campos">Compensación por trámites legales por vivienda reposición</td>
          <td width="20%" class="campos">Compensación impacto económico</td>
          <td width="20%" class="campos">Compensación gastos escolarización</td>
          <td width="20%" class="campos">Compensación expensas curaduría intervenciones parciales</td>
          <td width="20%" class="campos">Compensación traslado especial</td>
        </tr>
        <tr valign="middle">
          <td><%= f.text_field :valor_tramitevivrep,{ :class => "campo", :size => 20,
                                  :onChange=> "javascript:this.value=this.value.toUpperCase();",
                                  :onFocus => "this.style.border='1px solid #f00'",
                                  :onBlur => "this.style.border='1px solid #bbb'" } %>
            <%= f.error_message_on :valor_tramitevivrep, :css_class =>"cerror"%></td>
          <td><%= f.text_field :valor_impacto,{ :class => "campo", :size => 20,
                                  :onChange=> "javascript:this.value=this.value.toUpperCase();",
                                  :onFocus => "this.style.border='1px solid #f00'",
                                  :onBlur => "this.style.border='1px solid #bbb'" } %>
            <%= f.error_message_on :valor_impacto, :css_class =>"cerror"%></td>
          <td><%= f.text_field :valor_gastosesco,{ :class => "campo", :size => 20,
                                  :onChange=> "javascript:this.value=this.value.toUpperCase();",
                                  :onFocus => "this.style.border='1px solid #f00'",
                                  :onBlur => "this.style.border='1px solid #bbb'" } %>
            <%= f.error_message_on :valor_gastosesco, :css_class =>"cerror"%></td>
          <td><%= f.text_field :valor_expensas,{ :class => "campo", :size => 20,
                                  :onChange=> "javascript:this.value=this.value.toUpperCase();",
                                  :onFocus => "this.style.border='1px solid #f00'",
                                  :onBlur => "this.style.border='1px solid #bbb'" } %>
            <%= f.error_message_on :valor_expensas, :css_class =>"cerror"%></td>
          <td><%= f.text_field :valor_trasladoesp,{ :class => "campo", :size => 20,
                                  :onChange=> "javascript:this.value=this.value.toUpperCase();",
                                  :onFocus => "this.style.border='1px solid #f00'",
                                  :onBlur => "this.style.border='1px solid #bbb'" } %>
            <%= f.error_message_on :valor_trasladoesp, :css_class =>"cerror"%></td>
        </tr>
      </table>
      <br/>
    <table width="100%" height="0" border="0" cellpadding="0" cellspacing="0">
      <tr><td height="10"><hr size="1" noshade class="hrlinea"/></td></tr></table>
      <br/>
    <table width="100%" border="0" cellspacing="2" cellpadding="0">
        <tr>
          <td width="3%" class="campos odd1"><div align="center">1.</div></td>
          <td width="21%" class="campos odd1">Fecha Solicitud Avaluo </td>
          <td class="campos"><%= calendar_date_select "iguana", "fecha_sol_avaluo", :year_range => select_rangocalendar, :class=> "campo", :size => 10, :time => false, :onfocus=>"this.blur()"%></td>
          <td class="campos odd1">Fecha LIMITE </td>
          <td class="campos"><%=@iguana.fecha_limite.strftime("%Y-%m-%d") rescue nil%></td>
          <td class="campos odd1">Entidad Avaluadora </td>
          <td class="campos"><%= f.text_field :entidad_avaluadora,{ :class => "campo", :size => 30,
                                  :onChange=> "javascript:this.value=this.value.toUpperCase();",
                                  :onFocus => "this.style.border='1px solid #f00'",
                                  :onBlur => "this.style.border='1px solid #bbb'" } %>
                            <%= f.error_message_on :entidad_avaluadora, :css_class =>"cerror"%></td>
        </tr>
        <tr>
          <td class="campos odd1"><div align="center">2.</div></td>
          <td class="campos odd1">Fecha Avaluo </td>
          <td class="campos"><%= calendar_date_select "iguana", "fecha_avaluo", :year_range => select_rangocalendar, :class=> "campo", :size => 10, :time => false, :onfocus=>"this.blur()"%></td>
          <td class="campos">&nbsp;</td>
          <td class="campos"></td>
          <td class="campos">&nbsp;</td>
          <td class="campos">&nbsp;</td>
        </tr>
        <tr>
          <td class="campos odd1"><div align="center">3.</div></td>
          <td height="19" class="campos odd1">Resolucion Oferta de Compra</td>
          <td class="camposDesc"><%= select(:iguana, :resolucion_ofercompra, select_sinoespecial,
                                            { :include_blank => true },
                                            { :style=>"width:100px", :class => "campo", :onFocus => "this.style.border='1px solid #f00'", :onBlur => "this.style.border='1px solid #bbb'" })%></td>
          <td class="campos odd1">Acepta Oferta Compra </td>
          <td class="camposDesc"><%= select(:iguana, :acepta_oferta_compra, select_sinoespecial,
                                            { :include_blank => true },
                                            { :style=>"width:100px", :class => "campo", :onFocus => "this.style.border='1px solid #f00'", :onBlur => "this.style.border='1px solid #bbb'" })%></td>
          <td class="camposDesc">&nbsp;</td>
          <td class="camposDesc">&nbsp;</td>
        </tr>
        <tr>
          <td class="campos odd1"><div align="center">4.</div></td>
          <td class="campos odd1">Resolucion Notificada </td>
          <td class="campos"><%= select(:iguana, :resolucion_notificada, select_sinoespecial2,
                                        { :include_blank => true },
                                        { :style=>"width:100px", :class => "campo", :onFocus => "this.style.border='1px solid #f00'", :onBlur => "this.style.border='1px solid #bbb'" })%></td>
          <td class="campos odd1">Fecha Notificacion <img class="img" src="/images/<%=band%>"/></td>
          <td class="campos"><%= calendar_date_select "iguana", "fecha_notificacion", :year_range => select_rangocalendar, :class=> "campo", :size => 10, :time => false, :onfocus=>"this.blur()"%></td>
          <td class="campos odd1">Fecha Aceptaci&oacute;n </td>
          <td class="campos"><%= calendar_date_select "iguana", "resolucion_aceptada", :year_range => select_rangocalendar, :class=> "campo", :size => 10, :time => false, :onfocus=>"this.blur()"%></td>
        </tr>
        <tr>
          <td class="campos odd1"><div align="center">5.</div></td>
          <td class="campos odd1">Solicitud Revision Avaluo </td>
          <td class="campos"><%= select(:iguana, :solicitud_revision_avaluo,select_sinoespecial2,
                                       { :include_blank => true },
                                       { :style=>"width:100px", :class => "campo", :onFocus => "this.style.border='1px solid #f00'", :onBlur => "this.style.border='1px solid #bbb'" })%></td>
          <td class="campos odd1">Fecha Solicitud</td>
          <td class="campos"><%= calendar_date_select "iguana", "fecha_sol_rev_avaluo", :year_range => select_rangocalendar, :class=> "campo", :size => 10, :time => false, :onfocus=>"this.blur()"%></td>
          <td class="campos odd1">Resultado <img class="img" src="/images/<%=band2%>"/></td>
          <td class="campos"><%= select(:iguana,
                :resultado_revision, select_iguanaresultado,
                        { :include_blank => true },
                      { :style=>"width:120px", :class => "campo", :onFocus => "this.style.border='1px solid #f00'", :onBlur => "this.style.border='1px solid #bbb'" })%></td>
        </tr>
        <tr>
          <td class="campos odd1"><div align="center">6.</div></td>
          <td height="19" class="campos odd1">Compraventa Firmada <img class="img" src="/images/<%=band3%>"/></td>
          <td class="camposDesc"><%= calendar_date_select "iguana", "compraventa_firma", :year_range => select_rangocalendar, :class=> "campo", :size => 10, :time => false, :onfocus=>"this.blur()"%></td>
          <td class="camposDesc">&nbsp;</td>
          <td class="camposDesc">&nbsp;</td>
          <td class="camposDesc">&nbsp;</td>
          <td class="camposDesc">&nbsp;</td>
        </tr>
        <tr>
        <td colspan="7">
          <fieldset>
          <table width="100%" border="0" cellspacing="2" align="center" cellpadding="0">
            <tr>
              <td width="30%" align="left" class="campos odd1">Nro Resolucion Oferta de Compra </td>
              <td width="13%" align="left"><%= f.text_field :nro_resol_compra,{ :class => "campo", :size => 20, :maxlength => 20,
                                                        :onChange=> "javascript:this.value=this.value.toUpperCase();",
                                                        :onFocus => "this.style.border='1px solid #f00'",
                                                        :onBlur => "this.style.border='1px solid #bbb'" } %></td>
              <td colspan="2" align="left" class="campos odd1">&nbsp;Fecha Resolucion de Compra </td>
              <td align="left" class="campos"><%= calendar_date_select "iguana", "fecha_resol_compra", :year_range => select_rangocalendar, :class=> "campo", :size => 10, :time => false, :onfocus=>"this.blur()"%></td>
              <td width="14%" align="left">&nbsp;</td>
            </tr>
            <tr>
              <td align="left" class="campos odd1">Nro Resolucion Modificatorias</td>
              <td align="left"><%= f.text_field :nro_resol_modif,{ :class => "campo", :size => 20, :maxlength => 20,
                                                :onChange=> "javascript:this.value=this.value.toUpperCase();",
                                                :onFocus => "this.style.border='1px solid #f00'",
                                                :onBlur => "this.style.border='1px solid #bbb'" } %></td>
              <td colspan="2" align="left" class="campos odd1">&nbsp;Fecha Resolucion Modificatoria </td>
              <td align="left" class="campos"><%= calendar_date_select "iguana", "fecha_resol_modif", :year_range => select_rangocalendar, :class=> "campo", :size => 10, :time => false, :onfocus=>"this.blur()"%></td>
              <td align="left">&nbsp;</td>
            </tr>
            <tr>
              <td align="left" class="campos odd1">Escritura</td>
              <td align="left"><%= select(:iguana, :escritura, select_sinoespecial2,
                                      { :include_blank => true },
                                      { :style=>"width:100px", :class => "campo", :onFocus => "this.style.border='1px solid #f00'", :onBlur => "this.style.border='1px solid #bbb'" })%></td>
              <td width="16%" align="left" class="campos odd1">&nbsp;Nro Escritura </td>
              <td width="12%" align="left"><%= f.text_field :nro_escritura,{ :class => "campo", :size => 20, :maxlength => 20,
                                                :onChange=> "javascript:this.value=this.value.toUpperCase();",
                                                :onFocus => "this.style.border='1px solid #f00'",
                                                :onBlur => "this.style.border='1px solid #bbb'" } %></td>
              <td width="15%" align="left" class="campos odd1">&nbsp;Fecha Escritura</td>
              <td align="left"><%= calendar_date_select "iguana", "fecha_escritura", :year_range => select_rangocalendar, :class=> "campo", :size => 10, :time => false, :onfocus=>"this.blur()"%></td>
            </tr>
            <tr>
              <td align="left" class="campos odd1">Notaria</td>
              <td colspan="2" align="left"><%= f.text_field :notaria,{ :class => "campo", :size => 30, :maxlength => 30,
                                                :onChange=> "javascript:this.value=this.value.toUpperCase();",
                                                :onFocus => "this.style.border='1px solid #f00'",
                                                :onBlur => "this.style.border='1px solid #bbb'" } %></td>
              <td align="left">&nbsp;</td>
              <td align="left">&nbsp;</td>
              <td align="left">&nbsp;</td>
            </tr>
          </table>
          </fieldset>
        </td>
        </tr>
        <tr>
          <td class="campos odd1"><div align="center">7.</div></td>
          <td class="campos odd1">Expropiaci&oacute;n</td>
          <td class="campos"><%= select(:iguana, :expropiacion, select_sinoespecial2,
                                      { :include_blank => true },
                                      { :style=>"width:100px", :class => "campo", :onFocus => "this.style.border='1px solid #f00'", :onBlur => "this.style.border='1px solid #bbb'" })%></td>
          <td class="campos">&nbsp;</td>
          <td class="campos">&nbsp;</td>
          <td class="campos">&nbsp;</td>
          <td class="campos">&nbsp;</td>
        </tr>
        <tr>
          <td class="campos odd1"><div align="center">8.</div></td>
          <td class="campos odd1">Opcion de Vivienda </td>
          <td colspan="2" class="campos">
            <%= select(:iguana,:opcion_vivienda, select_opc_viviendas, { :include_blank => true },
                      { :style=>"width:200px", :class => "campo", :onFocus => "this.style.border='1px solid #f00'", :onBlur => "this.style.border='1px solid #bbb'" })%></td>
          <td class="campos odd1"><div align="center">Estado Vivienda</div></td>
          <td colspan="2"class="campos">
            <%= select(:iguana,:estado_vivienda, select_est_vivienda,{ :include_blank => true },
                      { :style=>"width:230px", :class => "campo", :onFocus => "this.style.border='1px solid #f00'", :onBlur => "this.style.border='1px solid #bbb'" })%></td>
        </tr>
  <tr>
        <td height="19" colspan="7" class="campos"><table width="100%" border="0" cellspacing="2" align="center" cellpadding="0">
            <tr>
              <td width="20%" rowspan="3" align="left" class="campos"><div align="center"></div></td>
              <td width="25%" height="19" class="campos odd1">Cruce con Ministerio</td>
              <td width="14%" class="camposDesc"><%= select(:iguana, :cruzado, select_sinoespecial,
                                                     { :include_blank => true },
                                                     { :style=>"width:80px", :class => "campo", :onFocus => "this.style.border='1px solid #f00'", :onBlur => "this.style.border='1px solid #bbb'" })%></td>
              <td width="28%" class="campos odd1">Fecha Cruce</td>
              <td width="13%" class="camposDesc"><%= calendar_date_select "iguana", "fecha_cruzado", :year_range => select_rangocalendar, :class=> "campo", :size => 10, :time => false, :onfocus=>"this.blur()"%></td>
            </tr>
            <tr>
              <td height="19" class="campos odd1">Reasentado</td>
              <td class="camposDesc"><%= select(:iguana, :reasentado, select_sinoespecial, { :include_blank => true },
                                          { :style=>"width:80px", :class => "campo", :onFocus => "this.style.border='1px solid #f00'", :onBlur => "this.style.border='1px solid #bbb'" })%></td>
              <td class="campos odd1">Fecha Reasentado</td>
              <td class="camposDesc"><%= calendar_date_select "iguana", "fecha_reasentamiento", :year_range => select_rangocalendar, :class=> "campo", :size => 10, :time => false, :onfocus=>"this.blur()"%></td>
              </tr>
            <tr>
              <td align="left" class="campos odd1">Fecha Inicio Arrendamiento</td>
              <td align="left"><%= calendar_date_select "iguana", "fecha_inicio_arre", :year_range => select_rangocalendar, :class=> "campo", :size => 10, :time => false, :onfocus=>"this.blur()"%></td>
              <td align="left" class="campos odd1">Fecha Finalizacion Arrendamiento </td>
              <td align="left"><%= calendar_date_select "iguana", "fecha_fin_arre", :year_range => select_rangocalendar, :class=> "campo", :size => 10, :time => false, :onfocus=>"this.blur()"%></td>
            </tr>
          </table></td>
        </tr>
        <tr>
          <td height="19" colspan="7" class="campos">
      <fieldset>
      <table width="100%" border="0" cellspacing="2" align="center" cellpadding="0">
            <tr>
              <td width="13%" rowspan="4" align="left" class="campos"><div align="center">SI LA <br>
                  OPCION <br>
                ES VIVIENDA USADA</div></td>
              <td width="30%" align="left" class="campos odd1">&nbsp;Fecha Solicitud Certificado Riesgo </td>
              <td width="13%" align="left"><%= calendar_date_select "iguana", "fecha_sol_riesgo", :year_range => select_rangocalendar, :class=> "campo", :size => 10, :time => false, :onfocus=>"this.blur()"%></td>
              <td width="30%" align="left" class="campos odd1">&nbsp;Fecha Recibido Certificado Riesgo </td>
              <td width="14%" align="left"><%= calendar_date_select "iguana", "fecha_rec_riesgo", :year_range => select_rangocalendar, :class=> "campo", :size => 10, :time => false, :onfocus=>"this.blur()"%></td>
            </tr>
            <tr>
              <td align="left" class="campos odd1">&nbsp;Fecha Solicitud Avaluo </td>
              <td align="left"><%= calendar_date_select "iguana", "fecha_solre_avaluo", :year_range => select_rangocalendar, :class=> "campo", :size => 10, :time => false, :onfocus=>"this.blur()"%></td>
              <td align="left" class="campos odd1">&nbsp;Fecha Recibido Avaluo</td>
              <td align="left"><%= calendar_date_select "iguana", "fecha_rec_avaluo", :year_range => select_rangocalendar, :class=> "campo", :size => 10, :time => false, :onfocus=>"this.blur()"%></td>
            </tr>
            <tr>
              <td align="left" class="campos odd1">&nbsp;Fecha Remision Banco Inmobiliario</td>
              <td align="left"><%= calendar_date_select "iguana", "fecha_rem_banco", :year_range => select_rangocalendar, :class=> "campo", :size => 10, :time => false, :onfocus=>"this.blur()"%></td>
              <td align="left" class="campos odd1">&nbsp;Fecha Devolucion  Banco Inmobiliario</td>
              <td align="left"><%= calendar_date_select "iguana", "fecha_dev_banco", :year_range => select_rangocalendar, :class=> "campo", :size => 10, :time => false, :onfocus=>"this.blur()"%></td>
            </tr>
            <tr>
              <td align="left" class="campos odd1">&nbsp;Fecha Remision Asignacion Subsidio </td>
              <td align="left"><%= calendar_date_select "iguana", "fecha_rem_subsidio", :year_range => select_rangocalendar, :class=> "campo", :size => 10, :time => false, :onfocus=>"this.blur()"%></td>
              <td align="left" class="campos odd1">&nbsp;Fecha Devolucion Asignacion Subsidio</td>
              <td align="left"><%= calendar_date_select "iguana", "fecha_dev_subsidio", :year_range => select_rangocalendar, :class=> "campo", :size => 10, :time => false, :onfocus=>"this.blur()"%></td>
            </tr>
          </table>
      </fieldset></td>
        </tr>
        <tr>
          <td height="19" colspan="7" class="campos">
      <fieldset>
      <table width="100%" border="0" cellspacing="2" align="center" cellpadding="0">
            <tr>
              <td width="40%" rowspan="2" align="left" class="campos"><div align="center">SI LA OPCION ES VIVIENDA NUEVA </div></td>
              <td width="26%" align="left" class="campos odd1">&nbsp;Fecha Remisi&oacute;n Financiera</td>
              <td width="34%" align="left"><%= calendar_date_select "iguana", "fecha_rem_financiera", :year_range => select_rangocalendar, :class=> "campo", :size => 10, :time => false, :onfocus=>"this.blur()"%></td>
              </tr>
            <tr>
              <td align="left" class="campos odd1">&nbsp;Fecha Remisi&oacute;n Juridica</td>
              <td align="left"><%= calendar_date_select "iguana", "fecha_rem_juridica", :year_range => select_rangocalendar, :class=> "campo", :size => 10, :time => false, :onfocus=>"this.blur()"%></td>
              </tr>
          </table>
      </fieldset></td>
        </tr>
        <tr>
          <td class="campos odd1"><div align="center">9.</div></td>
          <td height="19" class="campos odd1">Fecha Estimada Liberacion </td>
          <td class="camposDesc"><%= calendar_date_select "iguana", "fecha_estimada", :year_range => select_rangocalendar, :class=> "campo", :size => 10, :time => false, :onfocus=>"this.blur()"%></td>
          <td class="camposDesc">&nbsp;</td>
          <td class="camposDesc">&nbsp;</td>
          <td class="camposDesc">&nbsp;</td>
          <td class="camposDesc">&nbsp;</td>
        </tr>
        <tr>
          <td class="campos odd1"><div align="center">10.</div></td>
          <td height="19" class="campos odd1">Tratamiento</td>
          <td colspan="3" class="camposDesc"><%= select(:iguana, :tratamiento, select_iguanatratamiento,
                                            { :include_blank => true },
                                            { :style=>"width:250px", :class => "campo", :onFocus => "this.style.border='1px solid #f00'", :onBlur => "this.style.border='1px solid #bbb'" })%></td>
          <td class="camposDesc">&nbsp;</td>
          <td class="camposDesc">&nbsp;</td>
        </tr>
        <tr>
          <td class="campos odd1"><div align="center">11.</div></td>
          <td class="campos odd1">Deshabilitado</td>
          <td class="campos"><%= select(:iguana, :deshabilitado, select_sinoespecial,
                                      { :include_blank => true },
                                      { :style=>"width:100px", :class => "campo", :onFocus => "this.style.border='1px solid #f00'", :onBlur => "this.style.border='1px solid #bbb'" })%></td>
          <td class="camposDesc">&nbsp;</td>
          <td class="camposDesc">&nbsp;</td>
          <td class="campos">&nbsp;</td>
          <td class="campos">&nbsp;</td>
        </tr>
        <tr>
          <td class="campos odd1"><div align="center">12.</div></td>
          <td class="campos odd1">Demolido</td>
          <td class="campos"><%= select(:iguana, :demolido, select_sinoespecial2,
                                      { :include_blank => true },
                                      { :style=>"width:100px", :class => "campo", :onFocus => "this.style.border='1px solid #f00'", :onBlur => "this.style.border='1px solid #bbb'" })%></td>
          <td class="campos">&nbsp;</td>
          <td class="campos">&nbsp;</td>
          <td class="campos">&nbsp;</td>
          <td class="campos">&nbsp;</td>
        </tr>
        <% if permiso("iguanadescargue","C").to_s == "S" %>
            <tr>
              <td class="campos odd1"><div align="center">13.</div></td>
              <td height="19" class="campos odd1">Fecha Acta Entrega</td>
              <td class="camposDesc"><%= calendar_date_select "iguana", "fecha_entrega", :year_range => select_rangocalendar, :class=> "campo", :size => 10, :time => false, :onfocus=>"this.blur()"%></td>
              <td class="camposDesc">&nbsp;</td>
              <td class="camposDesc">&nbsp;</td>
              <td class="camposDesc">&nbsp;</td>
              <td class="camposDesc">&nbsp;</td>
            </tr>
            <tr>
              <td class="campos odd1"><div align="center">14.</div></td>
              <td height="19" class="campos odd1">Descargue Catastro</td>
              <td class="camposDesc"><%= select(:iguana, :solicitud_desccatastro, select_sinoespecial,
                                              { :include_blank => true },
                                              { :style=>"width:100px", :class => "campo", :onFocus => "this.style.border='1px solid #f00'", :onBlur => "this.style.border='1px solid #bbb'" })%></td>
              <td class="camposDesc">&nbsp;</td>
              <td class="camposDesc">&nbsp;</td>
              <td class="camposDesc">&nbsp;</td>
              <td class="camposDesc">&nbsp;</td>
            </tr>
            <tr>
              <td class="campos odd1"><div align="center">15.</div></td>
              <td height="19" class="campos odd1">Fecha Radicado Catastro</td>
              <td class="camposDesc"><%= calendar_date_select "iguana", "fecha_radicadocatastro", :year_range => select_rangocalendar, :class=> "campo", :size => 10, :time => false, :onfocus=>"this.blur()"%></td>
              <td class="campos odd1">Nro Radicado</td>
              <td colspan="3" class="camposDesc"><%= f.text_field :radicado_nro,{ :class => "campo", :size => 30,
                                                                  :onChange=> "javascript:this.value=this.value.toUpperCase();",
                                                                  :onFocus => "this.style.border='1px solid #f00'",
                                                                  :onBlur => "this.style.border='1px solid #bbb'" } %>
              <%= f.error_message_on :radicado_nro, :css_class =>"cerror"%></td>
            </tr>
            <tr>
              <td class="campos odd1"><div align="center">16.</div></td>
              <td height="19" class="campos odd1">Descargue EPM</td>
              <td class="camposDesc"><%= calendar_date_select "iguana", "fecha_epm", :year_range => select_rangocalendar, :class=> "campo", :size => 10, :time => false, :onfocus=>"this.blur()"%></td>
              <td class="campos odd1">Nro Radicado</td>
              <td colspan="3" class="camposDesc"><%= f.text_field :epm_radicado_nro,{ :class => "campo", :size => 30,
                                                                  :onChange=> "javascript:this.value=this.value.toUpperCase();",
                                                                  :onFocus => "this.style.border='1px solid #f00'",
                                                                  :onBlur => "this.style.border='1px solid #bbb'" } %></td>
            </tr>
            <tr>
              <td class="campos odd1"><div align="center">17.</div></td>
              <td height="19" class="campos">Descargue EEVV</td>
              <td class="campos"><%= calendar_date_select "iguana", "fecha_eevv", :year_range => select_rangocalendar, :class=> "campo", :size => 10, :time => false, :onfocus=>"this.blur()"%></td>
              <td class="campos odd1">Tiene Cartera</td>
              <td colspan="3" class="camposDesc"><%= select(:iguana, :tiene_cartera, select_sino,
                                                         { :include_blank => true },
                                                         { :style=>"width:100px", :class => "campo", :onFocus => "this.style.border='1px solid #f00'", :onBlur => "this.style.border='1px solid #bbb'" })%></td>
            </tr>
        <%else%>
            <tr>
              <td class="campos odd1"><div align="center">13.</div></td>
              <td height="19" class="campos odd1">Fecha Acta Entrega</td>
              <td class="camposDesc"><%=@iguana.fecha_entrega%></td>
              <td class="camposDesc">&nbsp;</td>
              <td class="camposDesc">&nbsp;</td>
              <td class="camposDesc">&nbsp;</td>
              <td class="camposDesc">&nbsp;</td>
            </tr>
            <tr>
              <td class="campos odd1"><div align="center">14.</div></td>
              <td height="19" class="campos odd1">Descargue Catastro</td>
              <td class="camposDesc"><%=@iguana.dsolicituddesccatastro rescue nil%></td>
              <td class="camposDesc">&nbsp;</td>
              <td class="camposDesc">&nbsp;</td>
              <td class="camposDesc">&nbsp;</td>
              <td class="camposDesc">&nbsp;</td>
            </tr>
            <tr>
              <td class="campos odd1"><div align="center">15.</div></td>
              <td height="19" class="campos odd1">Fecha Radicado Catastro</td>
              <td class="camposDesc"><%=@iguana.fecha_radicadocatastro%></td>
              <td class="campos odd1">Nro Radicado</td>
              <td colspan="3" class="camposDesc"><%=@iguana.radicado_nro%></td>
            </tr>
            <tr>
              <td class="campos odd1"><div align="center">16.</div></td>
              <td height="19" class="campos odd1">Descargue EPM</td>
              <td class="camposDesc"><%=@iguana.fecha_epm%></td>
              <td class="campos odd1">Nro Radicado</td>
              <td colspan="3" class="camposDesc"><%=@iguana.epm_radicado_nro%></td>
            </tr>
            <tr>
              <td class="campos odd1"><div align="center">17.</div></td>
              <td height="19" class="campos odd1">Descargue EEVV</td>
              <td class="camposDesc"><%=@iguana.fecha_eevv%></td>
              <td class="campos odd1">Tiene Cartera</td>
              <td colspan="3" class="camposDesc"><%=@iguana.tiene_cartera%></td>
            </tr>
        <%end%>
        <tr>
          <td class="campos odd1"><div align="center">18.</div></td>
          <td height="19" class="campos odd1">Predio Lote?</td>
          <td class="camposDesc"><%= select(:iguana, :predio_lote, select_sinoespecial,
                                          { :include_blank => true },
                                          { :style=>"width:100px", :class => "campo", :onFocus => "this.style.border='1px solid #f00'", :onBlur => "this.style.border='1px solid #bbb'" })%></td>
          <td class="camposDesc">&nbsp;</td>
          <td class="camposDesc">&nbsp;</td>
          <td class="camposDesc">&nbsp;</td>
          <td class="camposDesc">&nbsp;</td>
        </tr>
        <tr>
          <td class="campos odd1"><div align="center">19.</div></td>
          <td height="19" class="campos odd1">Paga Catastro?</td>
          <td class="camposDesc"><%= select(:iguana, :paga_catastro, select_sinoespecial,
                                          { :include_blank => true },
                                          { :style=>"width:100px", :class => "campo", :onFocus => "this.style.border='1px solid #f00'", :onBlur => "this.style.border='1px solid #bbb'" })%></td>
          <td class="camposDesc">&nbsp;</td>
          <td class="camposDesc">&nbsp;</td>
          <td class="camposDesc">&nbsp;</td>
          <td class="camposDesc">&nbsp;</td>
        </tr>
        <tr>
          <td class="campos"><div align="center"></div></td>
          <td height="19" class="campos odd1">Estado General</td>
          <td class="campos" colspan="5">
            <% if @iguana.iguanasestado_id.to_i == 7 or @iguana.iguanasestado_id.to_i == 8 %>
            <div class="camposNotas"><%=@iguana.iguanasestado.descripcion rescue nil%></div>
            <% else %>
            
              <%=select("iguana", "iguanasestado_id", Iguanasestado.find(:all,:conditions=>["tipo = 'ADQUISICION'"],:order=>'descripcion').collect {|p| [ p.descripcion, p.id ] }, { :include_blank => true },
               { :style=>"width:600px", :class => "campo", :onFocus => "this.style.border='1px solid #f00'", :onBlur => "this.style.border='1px solid #bbb'" }) %>
            <% end %>
       </td>
        </tr>
        <tr>
          <td>&nbsp;</td>
          <td class="campos">&nbsp;</td>
          <td class="campos">&nbsp;</td>
          <td class="campos">&nbsp;</td>
          <td class="campos">&nbsp;</td>
          <td class="campos">&nbsp;</td>
          <td class="campos">&nbsp;</td>
        </tr>
      </table>
    <table width="100%" height="0" border="0" cellpadding="0" cellspacing="0">
      <tr>
        <td height="10"><hr size="1" noshade class="hrlinea"/></td>
      </tr>
</table>

<% unless @iguana.new_record? %>
    <% if permiso("iguana","A").to_s == "S" %>
      <% if @iguana.proyecto = "IGUANA" and permiso("reasentamientosiguana","C").to_s == "S" %>
          <table width="100%" border="0" cellpadding="2" cellspacing="2">
            <tr>
              <td class="camposNotas" align="left">
                <% unless @iguana.new_record? %>
                Ultima Actualización: <%=User.find(@iguana.useract_id).username rescue nil%> - <%=@iguana.updated_at.strftime("%Y-%m-%d %X")%>
              <% end %></td>
              <td  height="30"><div align="right">
                  <div class="uiButton"><img class="img" src="/images/guardar.png"/>&nbsp;&nbsp;<span class="uiButtonText"><%= submit_tag "Guardar", :disable_with => "Guardando..."%></span></div>
                  <% if permiso("iguana","E").to_s == "S" %>
                     &nbsp;&nbsp;<%= link_to 'Eliminar', @iguana, :confirm => 'Esta seguro que desea eliminiar este registro con todos sus componentes?', :method => :delete,:class=>"borrarlink" %>
                  <% end %>
                     <%= link_to "Cierre Financiero", {:controller => "iguanas", :action => "cierre", :id=>@iguana.id},  :popup => ['new_window','height=520,width=830,scrollbars=yes'], :class=>"verlink"%>
                 </div></td>
            </tr>
          </table>
      <% elsif @iguana.proyecto = "MORAVIA" and permiso("reasentamientosmoravia","C").to_s == "S" %>
          <table width="100%" border="0" cellpadding="2" cellspacing="2">
            <tr>
              <td class="camposNotas" align="left">
                <% unless @iguana.new_record? %>
                Ultima Actualización: <%=User.find(@iguana.useract_id).username rescue nil%> - <%=@iguana.updated_at.strftime("%Y-%m-%d %X")%>
              <% end %></td>
              <td  height="30"><div align="right">
                  <div class="uiButton"><img class="img" src="/images/guardar.png"/>&nbsp;&nbsp;<span class="uiButtonText"><%= submit_tag "Guardar", :disable_with => "Guardando..."%></span></div>
                  <% if permiso("iguana","E").to_s == "S" %>
                     &nbsp;&nbsp;<%= link_to 'Eliminar', @iguana, :confirm => 'Esta seguro que desea eliminiar este registro con todos sus componentes?', :method => :delete,:class=>"borrarlink" %>
                  <% end %>
                 </div></td>
            </tr>
          </table>
      <% elsif permiso("reasentamiento","C").to_s == "S" %>
          <table width="100%" border="0" cellpadding="2" cellspacing="2">
            <tr>
              <td class="camposNotas" align="left">
                <% unless @iguana.new_record? %>
                Ultima Actualización: <%=User.find(@iguana.useract_id).username rescue nil%> - <%=@iguana.updated_at.strftime("%Y-%m-%d %X")%>
                <% end %></td>
              <td  height="30"><div align="right">
                  <div class="uiButton"><img class="img" src="/images/guardar.png"/>&nbsp;&nbsp;<span class="uiButtonText"><%= submit_tag "Guardar", :disable_with => "Guardando..."%></span></div>
                  <% if permiso("iguana","E").to_s == "S" %>
                     &nbsp;&nbsp;<%= link_to 'Eliminar', @iguana, :confirm => 'Esta seguro que desea eliminiar este registro con todos sus componentes?', :method => :delete,:class=>"borrarlink" %>
                  <% end %>
                 </div></td>
            </tr>
          </table>
      <% end %>
    <% end %>
    <% end %>
    <table width="100%" border="0" cellpadding="2" cellspacing="2">
  <tr>
    <td  height="30"><div align="right">
       <% if permiso("iguana","A").to_s == "S" %>
          <div class="uiButton"><img class="img" src="/images/guardar.png"/>&nbsp;&nbsp;<span class="uiButtonText"><%= submit_tag "Guardar", :disable_with => "Guardando..."%></div>
        <% end %>
        <% if permiso("iguana","E").to_s == "S" %>
           &nbsp;&nbsp;<%= link_to 'Eliminar', @iguana, :confirm => 'Esta seguro que desea eliminiar este registro con todos sus componentes?', :method => :delete,:class=>"borrarlink" %>
        <% end %>
      </div></td>
  </tr>
</table>
<% end %>
